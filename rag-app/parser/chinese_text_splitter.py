import re
from typing import List, Callable

from parser.agentic_chunking import ChunkOrganizer

WHITESPACE_RE = re.compile(
    r"[ \t\u3000\x0b\x0c\r]+"  # 半角/全角空格、Tab、VT、FF、CR
)


# 预处理：把所有 “看不见的空白” 压成普通换行
def normalize_blanklines(text: str) -> str:
    text = WHITESPACE_RE.sub(" ", text)  # 先统一成普通空格，保留行内空格
    text = text.replace("\u2029", "\n")  # 段落分隔符
    # 压缩 >=4 连续换行 → 两个换行
    return re.sub(r"(?:\n\s*){4,}", "\n\n", text)


# ========= 1) 原子切分器工厂 ========= #
def char_split(text: str) -> List[str]:
    return list(text)


def sentence_split(text: str) -> List[str]:
    """正则分句，保留句尾标点"""
    pattern = r'[^。！？!?]*[。！？!?]|[^。！？!?]+$'
    return re.findall(pattern, text)


def paragraph_split(text: str) -> list[str]:
    text = text.replace("\r\n", "\n").replace("\r", "\n")
    text = normalize_blanklines(text)
    # 1) 按 >=2 换行切；允许行首有空白
    pieces = re.split(r"(?:\n\s*){2,}", text)
    # 2) 仅保留“含任意非空白字符”的段落
    return [p.strip() for p in pieces if re.search(r"\S", p)]


SPLITTERS: dict[str, Callable[[str], List[str]]] = {
    "char": char_split,
    "sentence": sentence_split,
    "paragraph": paragraph_split,
}


# ========= 2) 通用递归分割器 ========= #
class FlexibleRecursiveSplitter:
    def __init__(
            self,
            granularity: str = "sentence",
            chunk_size: int = 200,
            overlap_units: int = 2,
            char_separators: List[str] | None = None,
    ):
        if granularity not in SPLITTERS:
            raise ValueError(f"granularity must be one of {list(SPLITTERS)}")
        self.split_fn = SPLITTERS[granularity]
        self.granularity = granularity
        self.chunk_size = chunk_size
        self.overlap_units = overlap_units
        self.char_separators = char_separators or ["\n\n", "\n", " ", None]

    # ---- 主入口 ---- #
    def split(self, text: str) -> List[str]:
        units = self.split_fn(text)
        return self._assemble(units)

    # ---- 组块 + 重叠 ---- #
    def _assemble(self, units: List[str]) -> List[str]:
        chunks, buf, buf_len = [], [], 0
        for u in units:
            u_len = len(u)
            # 原子本身超长 → 字符级递归
            if u_len > self.chunk_size:
                chunks.extend(self._char_recursive_split(u))
                continue
            # 不超限，累加
            if buf_len + u_len <= self.chunk_size:
                buf.append(u)
                buf_len += u_len
            else:
                chunks.append("".join(buf))
                buf = buf[-self.overlap_units:] if self.overlap_units else []
                buf_len = sum(len(x) for x in buf)
                buf.append(u)
                buf_len += u_len
        if buf:
            chunks.append("".join(buf))
        return chunks

    # ---- 字符级递归，沿用 LangChain 思路 ---- #
    def _char_recursive_split(self, text: str, seps: List[str] | None = None):
        seps = seps or self.char_separators
        if len(text) <= self.chunk_size or not seps:
            return [text]
        if seps[0] is None:  # 真正的最后兜底
            return [text[i:i + self.chunk_size]  # 每 chunk_size 个字符一块
                    for i in range(0, len(text), self.chunk_size)]
        pieces = text.split(seps[0])
        # 分隔符没起作用 → 换下一级
        if len(pieces) == 1:
            return self._char_recursive_split(text, seps[1:])
        out = []
        for p in pieces:
            out.extend(self._char_recursive_split(p, seps[1:]))
        return out


if __name__ == "__main__":
    txt = """贵阳农商银行超值宝定开1年8期理财产品说明书尊敬的投资者，感谢您选择贵阳农村商业银行股份有限公司（以下简称“贵阳农商银行”）理财产品！您购买本款产品是由贵阳农商银行自主设计、投资、运作的理财产品。为保障您的合法权益，请您在进行金融投资时，警惕任何人与机构假借我行理财产品之名推介、推销其他类型产品。一、重要须知 1.在购买理财产品前，您应仔细阅读理财产品销售文件，包括理财产品说明书、贵阳农商银行理财产品协议书、贵阳农商银行理财产品投资者权益须知、贵阳农商银行风险承受能力评估书、贵阳农商银行理财产品风险揭示书、信息授权书（理财业务版），确保自己完全理解该项投资的性质和所涉及的风险，详细了解和审慎评估该理财产品的资金投向、风险类型、业绩比较基准等情况，在慎重考虑后自行决定购买与自身风险承受能力和资产管理需求相匹配的理财产品；在购买理财产品后，您应随时关注本理财产品的信息披露情况，及时获取相关信息。 2.无论您是否签署，如您购买本理财产品，即视为您已阅读、理解理财产品销售文件，并同意接受理财产品销售文件所有内容的约束。3.理财非存款、产品有风险、投资须谨慎。4.理财产品过往业绩不代表其未来表现，不等于理财产品实际收益，投资须谨慎。二、产品要素产品名称	超值宝定开1年8期理财产品产品编号	GRCB022024009产品登记编码	C1188324000013可依据该编码在中国理财网（www.chinawealth.com.cn）上查询产品信息。产品类型	固定收益类募集方式	公募运作方式	开放式业绩比较基准	【2.60%-3.60%】/年1.释义：业绩比较基准指资产管理人根据市场情况、本理财产品运行情况所设定的提取业绩报酬的标准。业绩比较基准不构成对委托财产收益的任何明示、暗示或保证。2.测算依据：本产品主要投资于现金类资产、货币类资产、货币市场基金、债券型基金、标准化固定收益类资产及符合前述投向的信托计划、资产管理计划，投资比例为80%-100%。业绩比较基准是根据产品的投资范围和周期，综合评估宏观经济环境、债券市场历史趋势、近期利率水平等情况，结合产品投资策略进行测算，扣除销售费、管理费、托管费等所有费用后，综合得到产品业绩比较基准。3.产品存续期内，贵阳农商银行可根据市场情况等调整业绩比较基准，并至少于新的业绩比较基准启用日之前2个工作日进行公告（公告方式为贵阳农商银行营业网点、官方网站等任一渠道）。4.业绩比较基准不是预期收益率，不代表产品的未来表现和实际收益，不构成对产品收益的承诺。 目标投资者	经贵阳农商银行评估为稳健型、平衡型、成长型、进取型的个人投资者内部风险评级	二级（较低风险级别）本金及收益币种	人民币产品规模	产品募集上限为40000万元，下限为1000万元。贵阳农商银行可根据市场情况等调整产品规模上下限。认购	认购是指投资者在产品募集期申请购买理财产品。申购	申购是指投资者在产品开放期申请购买理财产品。认购/申购面值	本理财产品认购/申购面值为1元/份，即单位初始份额净值为1元/份起购金额	个人投资者起购金额为1万元，以1万元的整数倍递增。 申购上限	单个投资者持有份额不超过2000万元，超出部分贵阳农商银行根据实际情况将限制申购。销售渠道	贵阳农商银行营业网点、手机银行等电子渠道工作日	产品存续期内每一国家法定工作日为工作日。募集期	2024年2月15日-2024年2月25日 。产品管理人有权根据市场情况提前结束或延长产品募集时间并相应调整产品成立日。封闭期	封闭期约为1年，每个封闭期运作天数按照实际天数计算。开放期	1.每年2月15日9:00-2月24日16:59为产品开放期，投资者可在该期间进行申购或赎回。2.若开放期最后一日遇国家法定节假日，则顺延至下一个工作日，若有调整以贵阳农商银行官方公告为准（调整公告于每一个开放期前一个工作日通过贵阳农商银行营业网点、官方网站等任一渠道公布）。3.开放日是指开放期内投资者可以申购、赎回本理财产品的任一日。成立日	2024年2月26日贵阳农商银行有权提前结束募集并成立产品，成立产品当天通过贵阳农商银行营业网点、官方网站等任一渠道公布。产品期限	1.本期产品期限20年，实际产品期限受制于提前终止条款。2.贵阳农商银行有权提前终止产品。贵阳农商银行提前终止产品时，将至少于提前终止日之前2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布。清算日	开放期结束日下一个工作日为产品清算日，投资者赎回金额采用清算日前一工作日产品净值进行确认。收益分配日	产品收益将在清算日后3个工作日内进行收益分配，收益以现金形式分配至投资者账户。兑付日	兑付日为清算日后的3个工作日内，将对成功申请赎回的份额进行兑付。到期资金	本产品到期资金=持有份额×到期日产品单位净值（到期资金按四舍五入原则，保留至小数点后2位）。赎回	1.投资者在开放期内未发起赎回申请的，投资者持有份额将自动进入下一个封闭期，依次循环直至产品到期。2.在开放期内申请赎回交易的，管理人将统一在清算日进行确认。投资者申请赎回并不代表赎回成功，赎回是否成功以管理人的确认结果为准。 3.赎回份额以 1万份的整数倍递增。预约赎回	1.预约赎回期为整个产品封闭期（若有调整，调整公告于开放期结束日前3个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布）。2.本产品设置预约赎回期，投资者可在此期间发起预约赎回申请及撤销预约赎回申请，预约赎回将统一在清算日生效，并确认赎回份额，且确认赎回份额适用巨额赎回的规则。巨额赎回	1.净赎回份额是指投资者赎回申请份额总数扣除申购申请份额总数后的份额。2.巨额赎回是指理财产品单个开放日净赎回份额申请超过前一日终理财产品总份额10%的赎回行为。3.发生巨额赎回时，管理人有权依照时间优先原则，拒绝超过理财产品净赎回份额10%以上部分的赎回申请，被拒绝的投资者可于开放期内下一开放日重新提交赎回申请。4.若理财产品连续2个开放日（含）及以上发生巨额赎回，管理人有权依照时间优先原则，拒绝超过理财产品净赎回份额10%以上部分的赎回申请，投资者可于开放期内下一开放日重新提交赎回申请。对于已经接受的赎回申请，管理人有权延缓支付赎回款项，延缓期限自理财产品兑付日起不超过15个工作日。5.如开放期最后一日发生巨额赎回情形，管理人有权根据实际情况决定是否接受赎回申请，如接受赎回申请的，管理人有权自理财产品兑付日起不超过15个工作日支付赎回款项。产品单位净值	理财产品单位净值是指理财产品净资产除以理财产品总份额得出的每份理财产品当日价值。资产管理人每个估值日根据对应产品所投资资产市场价格计算产品总资产价值， 并扣除各类成本及费用后，除以理财产品当前总份额，即为理财产品单位净值，净值的计算按四舍五入原则保留到小数点后第四位。净值公布	本产品存续期内：每周前2个工作日内公布截至上周最后一个工作日产品单位净值。产品开放期结束或提前终止后，在产品开放期结束或提前终止日（如遇非工作日，则顺延至下一个工作日）后的2个工作日内发布产品收益分配日或提前终止日的产品单位净值。产品单位净值的计算按照四舍五入原则，保留至小数点后4位。税款	贵阳农商银行暂不负责代扣代缴投资者购买本产品所得收益应缴纳的各项税款。若相关法律法规、税收政策规定产品管理人应代扣代缴相关税款，贵阳农商银行有权依法履行代扣代缴义务。最不利情况示例	在市场发生了最不利极端情况时，如战争、灾害、全球金融危机等因素导致债券大面积违约等情况，该笔投资将可能发生收益达不到预期或本金损失的风险，投资者应当充分认识投资风险，谨慎投资。其他	贵阳农商银行可根据需要对系统进行优化或升级，并至少于系统优化或升级开始前/完成后2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布。三、投资管理（一）投资范围本产品募集资金投资于现金类资产、货币市场工具、货币市场基金、标准化固定收益类资产和其他符合监管要求的资产，具体如下：1.现金类资产：包括但不限于活期存款、定期存款、协议存款等；2.货币类资产：同业存单（发行人主体信用评级AA及以上）、期限在一年以内（含一年）的债券回购、货币市场基金；3.标准化固定收益类资产：包括但不限于国债、中央银行票据、同业存单、金融债、企业债、公司债、中期票据、短期融资券、超短期融资券、定向债务融资工具（PPN）、资产支持证券（ABS）、资产支持票据（ABN）等；4.符合前述投向的信托计划、资产管理计划；5.其他符合监管要求的资产。各类资产的投资比例为：现金类资产、货币类资产、标准化固定收益类资产及符合前述投向的信托计划、资产管理计划的比例为80%-100%；其他符合监管要求的资产0%-20%。贵阳农商银行秉承价值投资的理念，通过资产组合管理实现本产品安全性、流动性与收益性的平衡。（二）产品管理人、产品托管人、理财投资合作机构的基本信息及主要职责1.产品管理人：贵阳农村商业银行股份有限公司主要职责：产品管理人负责理财产品宣传推广，投资者风险承受能力评估和投资者适当性管理，信息披露，理财产品份额认购/申购/赎回，与投资者签订理财产品销售文件，接受投资者的委托和授权，按照本产品说明书约定的投资范围进行投资和资产管理，代表理财产品签订投资和资产管理过程中涉及到的协议、合同等文本。2.产品托管人：中国工商银行股份有限公司主要职责：产品托管人主要负责依法依规提供账户开立、财产保管、清算交割、会计核算、资产估值、信息披露、投资监督以及托管合同约定的相关服务。3.理财投资合作机构理财投资合作机构包括但不限于理财产品所投资资产管理产品的发行机构、根据合同约定从事理财产品受托投资的机构以及与理财产品投资管理相关的投资顾问等。本理财产品投资合作机构可能包括:鑫沅资产管理有限公司、国民信托有限公司、华创证券有限责任公司、方正富邦基金管理有限公司、厦门国际信托有限公司，产品管理人可根据产品实际运作情况，在符合监管要求的前提下调整理财投资合作机构。主要职责：理财投资合作机构为进行受托资金的投资管理，根据合同约定从事受托投资或提供投资顾问等服务，具体职责以投资管理人与投资合作机构签署的合同为准。四、产品运作说明（一）存续期产品规模1.本期产品规模上限：40000万份。在本期产品募集期内，对本期产品的认购份额达到本期理财产品规模上限，则贵阳农商银行有权利自行决定是否即时停止本期产品的认购，已经认购成功的投资者投资权益不受影响。2.贵阳农商银行可根据市场情况等调整产品规模上、下限，并至少于调整规模上下限之日之前2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布。（二）认购/申购/追加投资/赎回/到期1.募集期/开放期内，投资者认购/申购本产品，应提前将认购/申购资金存入投资者认购/申购账户，认购/申购资金当日冻结，贵阳农商银行于产品成立日/清算日进行认购/申购资金扣划。产品募集期/开放期内，投资者将认购/申购资金存入投资者认购/申购账户之日至本产品成立日/清算日（不含）期间，投资者可获得认购/申购资金的活期存款利息（单利），但募集期/开放期内的活期存款利息（单利）不计入认购/申购资金。2.投资者在预约赎回期或开放期内未提起赎回申请的，投资者持有份额将自动进入下一个封闭期，依次循环直至产品到期；在预约赎回期或开放期内提起申请赎回交易的，将统一在开放期清算日进行确认。赎回份额确认日/产品到期日至资金到账日（不含）不计算活期存款利息。3.本期产品封闭期间，不开放申购、追加投资和赎回。五、产品资产估值（一）资产估值范围1.本产品资产总值包括理财产品项下现金类资产、货币市场工具、货币市场基金、标准化固定收益类资产和其他符合监管要求的资产总和。2.产品资产估值的目的是客观、准确地反映资产价值，确定产品资产净值，并为产品份额的兑付提供计价依据。3.产品存续期内，贵阳农商银行将于每周前2个工作日内公布截至上周最后一个工作日产品单位净值。产品开放期结束或提前终止后，在产品开放期结束或提前终止日（如遇非工作日，则顺延至下一个工作日）后的2个工作日内发布产品收益分配日或提前终止日的产品单位净值。产品单位净值的计算按照四舍五入原则，保留至小数点后4位。4.产品收益分配日，贵阳农商银行将扣除超额业绩报酬（如有）。贵阳农商银行每周通过网站（www.gynsh.com）公布产品单位净值。（二）资产估值方法1.现金、银行存款以本金列示，逐日计提银行存款利息，按约定利率确认存款利息收入；2.对于未在交易所上市的货币市场基金，按基金管理公司披露的估值日前一交易日的每万份收益计提收益；3.债券回购以成本(含回购费用)列示,按协议利率在实际持有期间内逐日计提利息。 4.标准化固定收益类资产银行间债券、资产支持证券等有价证券按中央国债登记结算有限责任公司（简称“中债登”） 公布的在估值日的估值价格（净价）进行估值。若中债登对同一债券给出多个估值价格（净价），优先使用有“推荐”标注（若有）的价格（净价）。其中对于含投资人回售权的标准化债权类资产，回售登记期截止日（含当日）后未行使回售权的按照长待偿期所对应的价格进行估值。未上市债券按成本估值。 交易所债券、资产支持证券等有价证券按中证指数有限公司公布的中证债券估值价格（净 价）进行估值。未上市债券按成本估值。同一债券同时在两个或两个以上市场交易的，按债券所处的市场的估值方法分别估值。5.投资资产管理产品、非标债权或其他特殊目的载体等的估值：（1）资产管理产品、非标债权或其他特殊目的载体等披露份额净值的，按最近一日的份额净值估值。（2）资产管理产品、非标债权或其他特殊目的载体等披露收益率的，按成本估值，按收益率计提收益；6.其它符合监管要求的资产，存在可以确定公允价值的，以公允价值估值；公允价值不能确定的，按取得时成本按摊余成本法估值；7.国家有最新规定的，按其规定进行估值。（三）估值错误的处理产品管理人和产品托管人将采取必要、适当合理的措施确保产品资产估值的准确性、及时性。当产品单位净值出现错误时，产品管理人应当立即予以纠正，并采取合理的措施防止损失进一步扩大。（四）暂停估值当产品的估值因不可抗力或其他情形致使产品管理人、托管人无法准确评估产品资产价值时或其他情形，产品管理人可暂停产品的估值，并于暂停估值/恢复估值之日起2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道通知投资者。六、理财收益说明（一）产品单位净值产品单位净值是指理财产品净资产除以理财产品总份额得出的每份理财产品当日价值。资产管理人每个估值日根据对应产品所投资资产市场价格计算产品总资产价值， 并扣除各类成本及费用后，除以理财产品当前总份额，即为理财产品单位净值，净值的计算按四舍五入原则保留到小数点后第四位。（二）费用本产品不收取认购费用、申购费用、赎回费用，申请费和赎回费均为0。本产品收取固定销售费0.20%/年、固定管理费0.20%/年、固定托管费0.01%/年和超额业绩报酬（如有），在收益分配日收取。贵阳农商银行有权根据市场情况等调整上述各项费用费率和业绩报酬收取比例，并至少于调整日之前2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布。1.固定销售费：本产品销售费按前一日产品资产净值的0.20%年费率计提。S=E×0.20%÷当年天数，S为每日应计提的销售费，E为前一日产品资产净值（下同），按日计提；2.固定管理费：本产品管理费按前一日产品资产净值的0.20%年费率计提。M=E×0.20%÷当年天数，M为每日应计提的管理费，按日计提；3.固定托管费：本产品托管费按前一日产品资产净值的0.01%年费率计提。G=E×0.01%÷当年天数，G为每日应计提的托管费，按日计提。4.超额业绩报酬：本产品设立业绩比较基准区间，产品年化收益率超过业绩比较区间的最低值时，产品管理人有权收取超额业绩报酬。但固定管理费与超额业绩报酬合计最高不超过产品总投资收益的30%。超额业绩报酬计算方法：产品年化收益率>业绩比较区间最低值时，产品管理人的超额业绩报酬=（产品总投资收益-固定销售费-固定管理费-固定托管费-应交税费（如有）-业绩比较区间最低值计算出的收益）*90%。5、其他相关费用产品运作和清算中产生的其他资金汇划费、结算费、交易手续费、注册登记费、信息披露费、账户服务费、审计费、律师费、税费等费用，上述费用（如有）按照实际发生时从理财产品中列支。本产品运作过程中的纳税义务按照相关法律法规、税收政策执行。（三）投资者收益投资者收益为产品投资收益扣除固定销售费、固定管理费、固定托管费、超额业绩报酬（如有）和其他相关费用等全部费用后的收益，分配方式为现金分红，收益分配资金于产品清算日后3个工作日内返回到认购/申购账户。示例：本产品运作期间，投资者按份额赎回所持有的理财产品，赎回金额按净值计算，扣除上述费用后，赎回金额= 赎回份额*开放期清算日前一工作日产品净值，投资者赎回金额计算结果按截位法保留两位小数。假设：投资者持有理财产品份额10,000.00份，开放期内投资者全部赎回期持有的份额，赎回时产品净值为1.0011，投资者赎回后可收到金额为：10,000*1.0011=10011.00元（上述示例采用假设数据计算，仅作为告知投资者公式计算方法使用，但测算收益不等于实际收益，实际收益以兑付为准，投资须谨慎；如发生基础资产无法回收任何本金和收益等最不利情况下，投资者将损失全部本金。）（四）税收本产品运作过程中涉及的各纳税主体，其纳税义务按国家税收法律、法规执行。本产品运营过程中发生的增值税应税行为，由贵阳农商银行申报和缴纳增值税及附加税费，税款从本产品资产总值中扣除。七、提前终止（一）投资者在该产品封闭期内不能主动赎回或终止。（二）在本期产品存续期间，贵阳农商银行有权提前终止产品。贵阳农商银行提前终止本期产品时，将至少于提前终止日之前2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布并在提前终止日后5个工作日内向投资者认购/申购账户返还投资应得资金，如遇国家法定节假日和公休日则顺延。终止日至资金实际到账日之间，投资者资金不计息。（三）贵阳农商银行提前终止本期产品的情形包括但不限于：1.产品存续规模低于1000万份，产品可提前终止，首次募集低于1000万元时，产品可不成立；2.因不可抗力原因导致理财产品无法继续运作；                                   3.遇有市场剧烈波动、异常风险事件等情形导致理财产品净值出现大幅波动或严重影响理财产品的资产安全；                                                            4.因投资者赎回导致理财产品剩余资产无法满足相关法律法规规定、所投资市场要求或与第三方签订的投资协议等相关法律文件约定，或者继续存续无法实现投资目标；5.因相关投资管理机构解散、破产、撤销、被取消业务资格等原因无法继续履行相应职责导致产品无法继续运作；6.相关投资管理机构或运用理财资金的第三方主体实施符合法律法规规定或与第三方签订的投资协议等相关法律文件约定的行为导致理财产品被动提前终止；7.因法律法规变化或国家金融政策调整、紧急措施出台影响产品继续正常运作；8.法律法规规定或监管部门认定的其他情形。（四）提前终止时收益计算示例假设持有份额100,000.00份，产品提前终止日单位净值1.0565元/份。则在提前终止日，应兑付给投资者应得资金为：则投资者应得资金＝100,000.00×1.0565=105,650.00（元）（上述示例采用假设数据计算，仅作为告知投资者公式计算方法使用，但测算收益不等于实际收益，实际收益以兑付为准，投资须谨慎；如发生基础资产无法回收任何本金和收益等最不利情况下，投资者将损失全部本金。）八、理财产品到期兑付（一）正常兑付投资者持有本期产品一个封闭期并成功提起赎回申请/预约赎回申请，投资者应得资金在产品清算日/到期日后一次性支付。贵阳农商银行于产品清算日/到期日后3个工作日内将投资者应得资金兑付至投资者认购/申购账户，清算日/到期日后3个工作日内不计算活期存款利息，如遇国家法定节假日和公休日则顺延。（二）非正常情况兑付如果发生异常情形，造成本产品的基础资产无法及时、足额变现，贵阳农商银行可以根据实际情况选择向投资者提前兑付、延迟兑付或者分次兑付，并于决定向投资者提前兑付、延迟兑付或者分次兑付前的2个工作日进行公告。（三）展期产品到期前，贵阳农商银行根据市场和产品运行情况等，有权利决定是否延长产品期限。如贵阳农商银行决定延长产品期限，将至少于产品到期日之前2个工作日内通过贵阳农商银行营业网点、官方网站等任一渠道公布延长后的产品期限及到期日等信息。九、信息披露1.信息披露的渠道理财产品存续期间，产品相关信息将通过贵阳农商银行营业网点、官方网站（www.gynsh.com）等任一渠道（以下简称“相关披露渠道”）发布。为保障投资者获取信息的准确性，产品信息内容以上述贵阳农商银行官方渠道发布为准。2.信息披露的时间和内容(1) 募集公告：产品发行前1个工作日将在相关披露渠道发布产品发行公告，内容包括但不限于产品在全国银行业理财信息登记系统的编码、成立日期和产品募集规模、募集时间、风险等级等信息。(2) 成立公告：产品成立后5个工作日内，在相关披露渠道发布产品成立公告，内容包括但不限于产品的募集信息、实际募集金额及产品费用说明与收取方式等信息。(3) 净值公告：产品成立后在每个开放日结束后2个工作日内披露开放日的份额净值、份额累计净值、认购价格和赎回价格。产品在开始办理份额申购或赎回前每周披露一次，披露内容包括产品名称、产品资产净值、份额净值等信息。(4) 分红公告：产品分红后5个工作日内在相关披露渠道发布产品分红公告，内容包括但不限于产品收益分配基准日、现金红利发放日、产品份额净值、产品分配利润等信息。(5)临时公告：不得晚于临时公告事件发生后5个工作日在相关披露渠道发布临时公告，内容包括但不限于根据市场变化导致产品发生调整且可能对投资者收益产生影响等各种临时信息。(6) 产品季度报告：将在每个季度结束之日起15个工作日内在相关披露渠道发布产品季度报告，内容包括但不限于产品的存续规模、收益表现；产品在季度最后一个市场交易日的份额净值、份额累计净值和资产净值；对投资者权益或投资收益等产生重大影响的突发事件等信息。(7) 产品半年度报告：将在上半年结束之日起60个工作日内在相关披露渠道发布产品半年度报告，内容包括但不限于产品的存续规模、收益表现；产品在半年和年度最后一个市场交易日的份额净值、份额累计净值和资产净值等信息。(8) 产品年度报告：将在每年结束之日起90个工作日内在相关披露渠道发布产品年度报告，内容同(7)的产品半年度报告。(9) 理财产品成立日不足90个工作日或者剩余存续期不超过 90 个工作日的，不编制理财产品当期的产品季度、半年度和年度报告。(10) 到期公告：理财产品终止后5个工作日内将在相关披露渠道发布产品到期公告，内容包括但不限于产品存续期限、产品到期日、管理费率、到期收益分配情况等信息。(11) 重大事项公告：理财产品存续期间，如果发生贵阳农商银行认为可能影响产品运作的重大不利事项或国家金融监督管理总局规定的重大事项时，在发生重大影响事件后2个工作日内将在相关披露渠道发布重大事项公告。(12) 理财产品账单：在理财产品存续期间，每月向投资者提供其所持有的产品账单查询， 产品账单内容包括但不限于投资者的理财产品持有份额、认购/申购金额、份额净值、收益情况、 交易明细等信息。3.信息披露的责任(1) 贵阳农村商业银行股份有限公司根据《中华人民共和国消费者权益保护法》《中国人民银行金融消费者权益保护实施办法》 《商业银行理财业务监督管理办法》的要求，主动、真实、准确、完整、及时地向理财投资者提供理财产品信息披露服务。(2) 投资者投资者应定期通过相关披露渠道获知有关本理财产品相关信息。4.投资者同意，贵阳农商银行通过相关披露渠道进行信息披露，如果投资者未及时查询，或由于通讯故障、系统故障以及其他不可抗力等因素的影响使得投资者无法及时了解产品信息，可能导致投资者产生风险，此类风险包括但不限于因投资者未及时获知信息而错过资金使用和再投资的机会等，由此产生的风险及损失（如有）由投资者自行承担。5.贵阳农商银行为投资者提供本产品相关信息查询。本产品存续期内，投资者可凭本人身份证件和《贵阳农商银行理财产品协议》在贵阳农商银行营业网点查询相关信息。十、保密义务贵阳农商银行应就理财产品销售过程中获知的投资者信息负有保密义务。非经投资者同意并授权的，不得向第三方披露，但法律法规或监管规定另有要求的除外。投资者同意并不可撤销的授权贵阳农商银行为理财登记系统信息登记需要，向银行业理财登记托管中心有限公司及监管机构提供投资者身份信息及理财产品持有信息等相关信息。贵阳农商银行理财产品协议贵阳农商银行理财产品协议（以下简称“本协议”）为理财产品销售文件不可分割的组成部分，请在签署本协议前，仔细阅读本协议各条款。甲方：投资者乙方：贵阳农商银行理财产品销售机构（如为线下购买，理财产品销售机构为甲方购买理财产品的营业网点；如为线上购买，理财产品销售机构为甲方在乙方的开户网点）经甲方与乙方协商一致，就甲方向乙方购买理财产品，达成协议如下：一、风险揭示：投资理财产品可能面临信用风险、市场风险、流动性风险等风险，具体风险因素由乙方在对应期次的理财产品说明书及风险揭示书中揭示。甲方应仔细阅读并充分理解与所投资理财产品对应的理财产品说明书及风险揭示书的详细条款及可能发生的风险。二、甲方声明：甲方为具有完全民事行为能力的个人。甲方接受并签署《贵阳农商银行理财产品协议》及本期的理财产品说明书、风险揭示书、投资者权益须知、信息授权书（理财业务版），对有关条款不存在任何疑问或异议；甲方以合法持有的资金购买乙方提供的产品，并能充分理解所购买产品的内容，完全知晓产品可能出现的各种风险，愿意承担投资风险。乙方向甲方提供的市场分析和预测仅供参考，甲方据此做出的任何决策出于甲方自己的判断，不得据此要求乙方承担任何责任；甲方承诺所提供的所有资料真实有效，如有变更，甲方应及时到原经办营业网点（如为线上购买的，原经办营业网点是指甲方在乙方的开户网点）办理变更手续。三、理财产品相关交易，个人投资者须持本人有效身份证件办理，不允许代理人代为办理。四、本协议仅适用于甲方向乙方购买的单笔理财产品，不同理财产品协议的效力及履行情况彼此独立。五、甲方认购/申购理财产品并签署本协议后，即授权乙方于认购/申购日冻结甲方认购/申购账户内的相应资金。冻结期间，甲方可获得认购/申购资金的活期存款利息（单利），但该活期存款利息不计入认购/申购资金。产品成立日乙方从该账户内扣划相应资金，但因甲方认购/申购账户状态异常导致乙方划扣不成功的，由甲方自行承担责任。六、甲方承诺在该产品存续期内，除非乙方按照对应期次的理财产品说明书中约定终止理财产品，否则甲方不得要求乙方提前退还投资款项，且不得将认购/申购账户账户销户。如乙方认购/申购账户状态异常导致投资款项无法入账，由甲方自行承担责任。因甲方认购/申购账户挂失、换卡等原因造成有关账户信息变更的，甲方应在投资款项入账前到乙方任一网点办理理财账户变更，如因甲方未及时变更而造成投资款项无法入账，甲方承担全部责任。七、因甲方认购/申购账户资金余额不足或其他原因(如冻结、挂失、换卡等)，导致认购/申购不成功，本协议自动终止，除理财认购/申购账户资金活期利息外，乙方不计付本理财产品的任何收益，并且乙方对此不承担任何责任。八、乙方将实际兑付资金转入甲方认购/申购账户后，即视为已向甲方支付完成，乙方不承担入账后的甲方资金风险。乙方有权向甲方收取理财产品各项费用，甲方同意收取方式由乙方根据各期产品的具体情况自行予以决定，具体收费标准在本产品对应期次的理财产品说明书中载明。除另有约定外，乙方不负责代扣代缴甲方应缴纳的税款。九、发生下列情况之一时，乙方有权单方提前终止本协议：（一）产品存续规模低于1000万份，产品可提前终止，首次募集低于1000万元时，产品可不成立；（二）因不可抗力原因导致理财产品无法继续运作；                                   （三）遇有市场剧烈波动、异常风险事件等情形导致理财产品净值出现大幅波动或严重影响理财产品的资产安全；                                                            （四）因投资者赎回导致理财产品剩余资产无法满足相关法律法规规定、所投资市场要求或与第三方签订的投资协议等相关法律文件约定，或者继续存续无法实现投资目标；（五）因相关投资管理机构解散、破产、撤销、被取消业务资格等原因无法继续履行相应职责导致产品无法继续运作；（六）相关投资管理机构或运用理财资金的第三方主体实施符合法律法规规定或与第三方签订的投资协议等相关法律文件约定的行为导致理财产品被动提前终止；（七）因法律法规变化或国家金融政策调整、紧急措施出台影响产品继续正常运作；（八）法律法规规定或监管部门认定的其他情形。十、乙方单方提前终止本协议时，甲方同意乙方可采取任意一种或多种方式通知甲方，通知方式包括但不限于短信、电话、乙方网站公告、信函、营业网点等。无论乙方是否以前述方式通知甲方，甲方同意乙方将行使提前终止权的应兑付资金划入甲方认购/申购账户，即视同乙方已经通知甲方。甲方不得以未知晓乙方提前终止而向乙方提出任何损失赔偿。十一、未经乙方同意，甲方不得将本协议项下任何权利和义务向任何第三人转让。十二、理财产品存续期间内，乙方有权通过官方网站、营业网点等任一渠道发布对理财产品说明书条款进行的补充、说明和修改。甲方应定期通过上述相关渠道获知有关理财产品的相关信息。十三、乙方通过相关披露渠道进行信息披露，如果甲方未及时查询，或由于甲方通讯故障、系统故障以及其他不可抗力等因素的影响使得甲方无法及时了解产品信息，可能导致甲方产生风险，此类风险包括但不限于因甲方未及时获知信息而错过资金使用和再投资的机会等，由此产生的风险及损失（如有）由甲方自行承担。如甲方预留在乙方的有效联系方式变更的，应及时到原经办网点办理信息变更。如因甲方未及时变更导致乙方无法联系甲方，由此产生的责任、风险和损失由甲方自行承担。十四、甲乙双方因履行本协议或与本协议有关的活动而产生的一切争议，应首先本着诚实信用原则通过友好协商解决；不能协商解决的，通过乙方所在地人民法院诉讼解决。十五、乙方发现甲方有涉嫌洗钱、恶意逃避税收管理等违法违规行为的，将按照国家有关规定向相关部门报告，并按规定报送甲方的相关信息。十六、甲方保证理财购买资金的来源和用途合法，理财购买资金未使用贷款、发行债券等筹集的非自有资金；十七、乙方严格按照《中华人民共和国个人信息保护法》相关要求规范对甲方个人信息的收集、存储、使用、提供等，为保障甲方的信息安全，乙方已使用符合业界标准的安全措施来尽量降低甲方的信息被泄露、毁损、误用、非授权访问、非授权披露和更改的风险，例如：通过加密传输、信息加密存储等。十八、本协议一式二份，甲乙双方各执一份，具有同等法律效力。十九、本协议为纸质的，自甲、乙双方签署之日起生效；如本协议为电子形式的，经甲方在贵阳农商银行电子渠道页面上勾选确认后生效。双方权利义务履行完毕后终止。特别提示请您在理解并同意本合同所有条款的情况下，再签署合同，对于不理解的内容，您有权向贵阳农商银行工作人员进行咨询并得到答复。签署本提示，系建立在您已经认真阅读并理解本合同全部条款的基础上，如您未阅读并理解本合同全部条款，请您不要签署本提示及本合同。本提示为《贵阳农商银行理财产品协议》及理财产品销售文件的重要组成部分，如您购买本理财产品，即视为您已阅读、理解理财产品销售文件，并同意接受理财产品销售文件所有内容的约束。您是否已阅读并理解本合同项下全部条款。                                     贵阳农商银行工作人员是否对合同相关条款进行了解释及说明。                                     签名确认：                  贵阳农商银行理财产品投资者权益须知尊敬的投资者：您好！“理财非存款、产品有风险、投资须谨慎”，本行销售的理财产品与存款存在明显区别，在获取收益的同时存在一定的风险。为了保护您的合法权益，如您在本行营业网点购买理财产品，本行将在征求您的同意后对销售过程进行录音录像，感谢您的配合。请在购买理财产品前认真阅读以下内容：一、购买理财产品流程（一）投资者填写《风险评估问卷》进行风险评估，阅读《风险揭示书》，依据自身的投资经验、目标、财务状况、承担风险能力等自行决定是否购买本产品。（二）投资者可通过营业网点和手机银行等电子渠道办理理财业务，具体开办机构及办理时间以贵阳农商银行发布的信息为准。（三）投资者已在我行开立个人结算账户，并存入足额资金。（四）投资者阅读理财销售文本，详细了解本期理财产品情况。（五）购买意向无误，个人投资者持本人身份证件，签订理财销售文本。二、投资者风险承受能力评估流程（一）投资者在首次购买理财产品前，应前往贵阳农商银行营业网点进行风险承受能力评估，签署《风险评估问卷》确认评估结果。（二）投资者风险评估超过一年或发生可能影响自身风险承受能力情况的，再次购买理财产品时，必须通过贵阳农商银行营业网点或电子渠道重新完成风险承受能力持续评估。（三）按照国家金融监督管理总局相关规定，投资者只能认购/申购理财产品风险等级与自身风险承受能力相匹配的理财产品，贵阳农商银行投资者评级与产品风险评级均分为五级，根据产品风险程度的不同，适合的投资者类型也不同。产品风险等级	风险程度	适合的投资者	适合投资策略一级	低	保守、稳健、平衡、成长、进取型	风险控制二级	较低	稳健、平衡、成长、进取型	稳健发展三级	中	平衡、成长、进取型	均衡成长四级	较高	成长、进取型	积极进取五级	高	进取型	风险承受三、信息披露（一）信息披露的渠道理财产品存续期间，产品相关信息将通过贵阳农商银行营业网点、官方网站（www.gynsh.com）等任一渠道（以下简称“相关披露渠道”）发布。为保障投资者获取信息的准确性，产品信息内容以上述贵阳农商银行官方渠道发布为准。（二）信息披露的时间和内容(1) 募集公告：产品发行前1个工作日将在相关披露渠道发布产品发行公告，内容包括但不限于产品在全国银行业理财信息登记系统的编码、成立日期和产品募集规模、募集时间、风险等级等信息。(2) 成立公告：产品成立后5个工作日内，在相关披露渠道发布产品成立公告，内容包括但不限于产品的募集信息、实际募集金额及产品费用说明与收取方式等信息。(3) 净值公告：产品成立后在每个开放日结束后2个工作日内披露开放日的份额净值、份额累计净值、认购价格和赎回价格。产品在开始办理份额申购或赎回前每周披露一次，披露内容包括产品名称、产品资产净值、份额净值等信息。(4) 分红公告：产品分红后5个工作日内在相关披露渠道发布产品分红公告，内容包括但不限于产品收益分配基准日、现金红利发放日、产品份额净值、产品分配利润等信息。(5)临时公告：不得晚于临时公告事件发生后5个工作日在相关披露渠道发布临时公告，内容包括但不限于根据市场变化导致产品发生调整且可能对投资者收益产生影响等各种临时信息。(6) 产品季度报告：将在每个季度结束之日起15个工作日内在相关披露渠道发布产品季度报告，内容包括但不限于产品的存续规模、收益表现；产品在季度最后一个市场交易日的份额净值、份额累计净值和资产净值；对投资者权益或投资收益等产生重大影响的突发事件等信息。(7) 产品半年度报告：将在上半年结束之日起60个工作日内在相关披露渠道发布产品半年度报告，内容包括但不限于产品的存续规模、收益表现；产品在半年和年度最后一个市场交易日的份额净值、份额累计净值和资产净值等信息。(8) 产品年度报告：将在每年结束之日起90个工作日内在相关披露渠道发布产品年度报告，内容同(7)的产品半年度报告。(9) 理财产品成立日不足90个工作日或者剩余存续期不超过 90 个工作日的，不编制理财产品当期的产品季度、半年度和年度报告。(10) 到期公告：理财产品终止后5个工作日内将在相关披露渠道发布产品到期公告，内容包括但不限于产品存续期限、产品到期日、管理费率、到期收益分配情况等信息。(11) 重大事项公告：理财产品存续期间，如果发生贵阳农商银行认为可能影响产品运作的重大不利事项或国家金融监督管理总局规定的重大事项时，在发生重大影响事件后2个工作日内将在相关披露渠道发布重大事项公告。(12) 理财产品账单：在理财产品存续期间，每月向投资者提供其所持有的产品账单查询， 产品账单内容包括但不限于投资者的理财产品持有份额、认购金额、份额净值、收益情况、 交易明细等信息。四、投诉及咨询电话若您在理财产品办理中有任何疑问或者投诉，可拨打我行客服电话0851-96777进行投诉，或到贵阳农商银行营业网点进行咨询。投诉流程：1.拨打0851-96777投诉；2. 客服中心记录投诉内容；3.业务主管部门核实投诉情况，制定处理、解决方案；4.客服中心向您反馈处理结果。贵阳农商银行理财产品风险揭示书理财非存款、产品有风险、投资须谨慎理财产品过往业绩不代表其未来表现，不等于理财产品实际收益，投资须谨慎尊敬的投资者：理财产品管理运用过程，可能会面临多种风险因素。因此，根据相关监管规定的要求，贵阳农商银行（理财产品管理人）郑重提示：本期产品为非保本浮动收益型理财产品，不保证本金和收益，请您充分认识投资风险，谨慎投资。本产品任何业绩比较基准、预计收益、测算收益或类似表述不代表投资者可能获得的实际收益，亦不构成贵阳农商银行对本产品的任何收益承诺。本期产品期限20年，贵阳农商银行有权对本期产品进行展期和提前终止，封闭期内产品不接受申购或赎回申请，开放期内接受申购或赎回申请。产品风险程度属于较低风险。本期产品内部风险评级级别为二级，风险适用于稳健型、平衡型、成长型和进取型投资者。最不利情况下，资产组合无法回收任何本金和净收益，投资者将损失全部本金。投资者不得使用贷款、发行债券等筹集的非自有资金投资本产品。示例：若投资者购买本理财产品，理财产品本金为100,000.00元，如果产品正常运作到期，产品期限365天，产品到期单位净值为1.0600元/份，除本金外，到期收益为：100,000.00×(1.0600-1)=6000.00（元），产品收益计算过程中产品单位净值按四舍五入原则保留至小数点后4位,存在尾差可能。在最不利情况下，资产组合无法回收任何本金和净收益，理财产品10万元本金将全部损失。如影响您风险承受能力的因素发生变化或风险承受能力评估超过一年，请及时完成风险承受能力评估。贵阳农商银行理财产品内部风险评级说明如下：风险评级	评级说明	适合投资者低风险级别（一级）	产品不保障本金，风险因素对本金及收益的影响极小	保守型、稳健型、平衡型、成长型、进取型较低风险级别（二级）	产品不保障本金，风险因素对本金及收益的影响较小	稳健型、平衡型、成长型、进取型中等风险级别（三级）	产品不保障本金，风险因素可能对本金和收益产生一定影响	平衡型、成长型、进取型较高风险级别（四级）	产品不保障本金，风险因素可能对本金产生较大影响，产品结构存在一定复杂性	成长型、进取型高风险级别（五级）	产品不保障本金，风险因素可能对本金造成重大损失，产品结构较为复杂	进取型注：本风险评级为贵阳农商银行内部评级结果，该评级仅供参考，不具备法律效力。在您选择购买理财产品前，请注意投资风险，仔细阅读理财产品销售文件，了解理财产品具体情况。您应在详细了解和审慎评估理财产品的资金投资方向、风险评级及业绩比较基准等基本情况后，自主决定购买与自身风险承受能力和资产管理需求匹配的理财产品。贵阳农商银行提醒您应本着“充分了解风险，自主选择购买”的原则，谨慎决策，自主决定将合法所有的资金用于购买本期产品。在购买本期产品后，您应随时关注产品的信息披露情况，及时获取相关信息。本期理财产品可能面临的风险主要包括但不限于以下风险：1.政策风险：本期产品是依照当前的法律法规、相关监管规定和政策设计的。如国家宏观政策以及市场法律法规、相关监管规定发生变化，可能影响产品的受理、投资运作、清算等业务的正常进行，并导致本期产品收益降低甚至本金损失，也可能导致本期产品与国家法律、法规等有关规定冲突，进而导致本期产品被宣告无效、撤销、解除或提前终止等。2.信用风险：本产品所投资的存款、货币市场工具、债券、非标准化债权类资产等固定收益类资产项下义务人可能出现违约情形，将导致相关金融产品的市场价值下跌或收益低于业绩比较基准、到期本金无法足额按时偿还，从而使投资者可能面临利益损失、本金部分损失、甚至本金全部损失的风险。3.流动性风险：投资者不能随时提前终止本产品，在本产品存续期内的非开放日，投资者不能赎回，在开放日，可能因达到本说明书中约定的限制赎回情况，导致投资者在需要资金时无法随时变现，并可能导致客户丧失其他投资机会。本产品投资资产的流动性风险情况为：本理财产品投资范围为债权类资产，具体品种包括：现金、存款、大额存单、同业存单、货币基金、质押式回购和其他货币市场类资产，以及国债、地方政府债券、中央银行票据、政府机构债券、金融债券、公司信用类债券、在银行间市场和证券交易所市场发行的资产支持证券、非公开定向债务融资工具、债券型证券投资基金、其他固定收益类资产等，上述投资标的中存款、质押式回购及其他交投不活跃品种存在不能提前支取或者不能提前到期的情形，所投资产一般情况下具有良好的流动性，但在特殊情况下，也存在部分品种交投不活跃、成交量不足的情形，如果理财产品赎回量较大，可能会影响产品流动性管理。为应对流动性风险，保护投资者利益，管理人可以综合运用以下理财产品流动性风险应对措施：（a）认购风险应对措施，包括：设定单一投资者认购金额上限、设定理财产品单日净认购比例上限、拒绝大额认购、暂停认购，以及国务院银行业监督管理机构规定的其他措施。(b）赎回风险应对措施，包括：设置赎回上限、延期办理巨额赎回申请、暂停接受赎回申请、延缓支付赎回款项、暂停理财产品估值，以及国务院银行业监督管理机构规定的其他措施。4.市场风险：本产品所投资的存款、货币市场工具、债券、非标准化债权类资产等固定收益类资产价值受未来市场的不确定影响可能出现波动，从而导致投资者收益波动、收益为零甚至本产品单位净值跌破面值、本金损失的情况。5.管理风险：因管理人（包括本理财计划的投资管理人、所投资的信托计划/资管计划/基金产品的受托人（如有）、相关投资顾问（如有）等，下同）受经验、技能等因素的限制，可能导致本理财计划项下的理财资金遭受损失。如因信托计划/资管计划/基金产品的受托人和相关投资顾问违背相关协议约定、处理事务不当，可能导致本理财计划项下理财资金遭受损失。6.利率及通货膨胀风险：在本产品存续期限内，利率、汇率的波动会导致所投资的存款、货币市场工具、债券、非标准化债权类资产等固定收益类资产的价值有波动，从而导致产品单位净值低于业绩比较基准，甚至跌破面值、本金损失。同时，本产品存在实际收益率可能低于通货膨胀率，从而导致投资者实际收益为负的风险。7.信息传递风险：贵阳农商银行将按照本说明书有关“信息披露”的约定进行产品信息披露。投资者应根据“信息披露”的约定及时进行查询。如果投资者未及时查询，或由于自身通讯故障、系统故障以及其他不可抗力等因素的影响使得投资者无法及时了解产品信息，并由此影响投资者的投资决策，因此而产生的责任和风险由投资者自行承担。另外，投资者预留在贵阳农商银行的有效联系方式发生变更，应及时到银行柜面申请变更，如投资者未及时变更联系方式，由此而产生的责任和风险由投资者自行承担。8.产品不成立风险：如本产品募集期届满，认购总金额未达到产品规模下限（如有约定），或市场发生剧烈波动，或发生本期产品难以成立的其他情况，经贵阳农商银行判断难以按照本期产品说明书规定向投资者提供本期产品的，贵阳农商银行有权宣布产品不成立。9.提前终止风险：产品存续期内，若市场发生重大变动或突发性事件，或发生贵阳农商银行认为需要提前终止本期产品的其他情形时，贵阳农商银行有权提前终止产品，在提前终止情形下，投资者面临不能按预定期限取得本金及收益的风险。10.延期风险：产品存续期内若市场发生重大变动或突发性事件，或发生贵阳农商银行认为需要对本产品进行延期的其他情形时，贵阳农商银行有权对本产品进行延期，在产品延期情形下，投资者面临不能按预定期限取得本金及收益的风险。11.不可抗力及意外事件风险：包括但不限于自然灾害、金融市场危机、战争或国家政策变化等不能预见、不能避免、不能克服的不可抗力事件或银行系统故障、通讯故障、投资市场停止交易等意外事件的发生，可能对产品的成立、投资运作、资金返还、信息披露、公告通知等造成影响，甚至可能导致产品收益低于业绩比较基准乃至产品单位净值跌破面值。对于由于不可抗力及意外事件风险导致的任何损失，投资者须自行承担，贵阳农商银行对此不承担任何责任。您在签署《理财产品协议》前，应当仔细阅读《信息授权书》（理财业务版）、《投资者权益须知》、本《风险揭示书》及本期产品的《产品说明书》的全部内容，同时向贵阳农商银行了解本期产品的其他相关信息，并独立做出是否购买本期产品的决定。您签字或勾选同意本《风险揭示书》、《理财产品协议》，并将资金委托给贵阳农商银行运作是您真实的意思表示。本《风险揭示书》及相应的《理财产品协议》、《产品说明书》、《信息授权书》（理财业务版）、《投资者权益须知》将共同构成理财销售文件的有效组成部分。风险揭示方：贵阳农村商业银行股份有限公司(投资者签字与签章见下一页)签字与签章个人投资者请在下面填写您的风险承受能力评级、抄录风险揭示语句并签字：投资者声明：本人在购买本期产品前已完成风险承受能力评估，且该评估结果具有效力。本人风险承受能力评级：	（由投资者自行填写）根据监管部门的要求，为确保投资者充分理解本期产品的风险，请在确认栏抄录以下语句并签名：本人已经阅读风险揭示，愿意承担投资风险。投资者抄录：（投资者声明：投资决策完全是由本人独立、自主、谨慎做出的。本人已经阅读《理财产品协议》、信息授权书（理财业务版）《投资者权益须知》、本期产品《风险揭示书》及《产品说明书》所有条款，充分理解并同意前述所有协议条款，自愿承担本期产品相关风险。）投资者签名：年      月     日信息授权书（理财业务版）尊敬的投资者：根据《中华人民共和国消费者权益保护法》《中国人民银行金融消费者权益保护实施办法》《商业银行理财业务监督管理办法》《银行保险机构消费者权益保护管理办法》的要求，为了保障您的合法权益，请您在签署本授权书之前，务必审慎阅读本授权书各条款(特别是黑体字条款)，并充分理解授权书条款内容，特别是与您有重大利害关系的条款(包括但不限于被授权人的责任及您的权利有关的条款)，且承诺您具有签订和履行本授权书的资格和能力，同时您签订和履行本授权书不违反您的任何合同义务、职责权限以及相关法律法规的规定。被授权方仅为办理业务所必须之目的收集及处理您的授权信息，如果您不同意相关信息的处理，您可能无法办理需您的相关信息才能办理的业务，但并不影响您正常办理贵阳农商银行其他业务。一、信息收集在遵循合法、正当、必要原则的前提下，您在办理理财业务签约、购买理财产品、办理定投等业务时，您授权贵阳农商银行处理您的如下信息：姓名、身份证号码、银行卡卡号、银行卡有效期、银行预留手机号等与业务办理相关的信息。二、信息使用为完整地向您提供服务以及保护各方的合法权益，您理解和同意贵阳农商银行可能会将您的信息用于如下用途：1.采取密码验证、短信验证码等手段以便于验证您的身份，确保完成理财产品交易。2.向您提供理财产品信息披露服务，服务内容包括但不限于各类理财产品公告、定期报告以及理财产品账单。3.为使您知晓贵阳农商银行理财业务情况或向您推荐更优质的理财产品和服务，自行或与供应商合作，通过电子邮件、网络投资者端消息提示或推送、手机短信等方式向您发送产品信息、服务通知、活动或其他商业性电子信息，若您认为前述方式对您造成了打扰，您可以根据本合同提供的客服电话要求退订或在收到相关信息后按照信息提示的方式退订。4.预防或阻止违法、违规的活动，如识别、打击洗钱等。5.为维护您的权益(例如预防或阻止非法或危及您人身、财产安全的活动)，或者为了解决服务提供方与您之间的争议。6.根据法律法规、政府机构、监管部门要求或其他经您另行明确同意的用途。三、信息提供贵阳农商银行承诺会根据法律法规及监管规定严格保护您的信息，不会在提供金融服务目的外向第三方披露您的信息，您同意贵阳农商银行可能会在下列情况下将必要的信息提供给第三方，该等第三方将会在贵阳农商银行官方网站上进行公示，您可以在贵阳农商银行官方网站上查询:1.当向您提供的金融服务需要由贵阳农商银行与第三方共同提供时。2.用于核实您的身份、处理与您相关的争议、或维护您和/或贵阳农商银行的合法权益的特定情况。3.向审计机构或审计监管机构提供审计所需的必要信息。4.根据法律法规、政府机构及其监管部门的要求提供。四、授权期限自您签署本授权书之日起，至贵阳农商银行与您的合同义务履行完毕之日止。超过本授权有效期的，为了后续异议或者纠纷处理的需要，从而保障贵阳农商银行及您的合法权益，您同意贵阳农商银行为实现本授权书声明的目的所必须的时限来确定个人信息保存期限，并在此期限内保留个人信息，在留存期限届满后，贵阳农商银行会删除您的信息或采取安全保护措施。法律、行政法规、政府规章、监管规范对投资者个人信息资料有更长保存期限要求的，遵守其规定。五、信息安全在使用您信息时，贵阳农商银行会采取必要措施保障信息安全，防止信息非法泄露或不当使用。贵阳农商银行超出本授权范围进行数据查询和使用的一切后果及法律责任由贵阳农商银行自行承担。六、权利告知您有权向贵阳农商银行查阅、复制您的个人信息。如果您发现贵阳农商银行收集、使用、保存及对外提供您的信息违反了法律、行政法规及监管文件规定或违反了与您的约定，或您发现贵阳农商银行采集、储存您的信息有误的，您可联系贵阳农商银行要求更正、补充或删除。如您对上述信息处理与保护条款存在任何疑问，或对于您的个人信息处理存在任何投诉、意见，请通过客服热线0851-96777联系以便为您处理。七、责任限制如公安机关、检查机关等执法部门做出了对您不利的决定时，您同意贵阳农商银行无须就此承担责任或赔偿。八、授权人声明已知悉并理解本授权书所有内容(特别是加粗字体内容)以及由此产生的法律效力，并同意上述条款所载内容。九、本授权书为纸质的，经您签署后生效；本授权书为电子形式的，经您在贵阳农商银行电子渠道页面上勾选确认后生效。十、特别提示□您同意并授权贵阳农商银行会将您的信息用于营销活动、用户体验改进、市场调查，如您需取消相关授权，您可以根据本合同提供的客服电话要求退订或在收到营销信息后按照信息提示的方式退订。(若您在该条前方框进行勾选，视为您同意.若您不勾选，您可能无法办理需您的相关信息才能办理的业务，但并不影响您正常办理贵阳农商银行其他业务)您签字或勾选同意，视为您已知晓并同意本《信息授权书》（理财业务版）的全部内容本人确认：贵阳农商银行已应本授权人要求对所有条款尽了提示、说明、解释义务。本授权是授权人的真实意思表示，本授权人不持任何异议，自愿同意承担由此带来的一切法律后果。授权人(签名):                                    证件号码:                              证件类型:□身份证□临时身份证□其他                     授权日期：   年   月   日授权人(公章)：法定代表人(负责人或授权代表)：授权日期：   年   月   日"""
    # A) 段落级 paragraph
    # B) 句子级 sentence
    # C) 字符级 char
    # chunk_size：对小型LLM（上下文2Ktoken）推荐256–512字符；对GPT‑4o等128K‑token窗口可放宽至2K +。
    # granularity：报告 / 合同 → "paragraph"（语义更完整）；FAQ / 问答 → "sentence"（颗粒度适中）；代码 / 超长句边缘 → "char"（兜底）。
    # overlap_units：句级 / 段级通常1‑3；字符级按窗口5–50。

    ps = FlexibleRecursiveSplitter(granularity="sentence", chunk_size=1024, overlap_units=2)
    import time

    start_time = time.time()
    organizer = ChunkOrganizer()
    blocks = []
    for i, chunk in enumerate(ps.split(txt), 1):
        blocks = organizer.process(chunk)
        print(f"{i:02d}｜{chunk}")
    end_time = time.time()
    print(blocks)
    print("程序运行时间：%s 秒" % (end_time - start_time))
